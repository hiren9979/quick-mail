<div class="template-container">
  <div class="header">
    <div class="header-left">
      <button mat-icon-button color="primary" routerLink="/home" matTooltip="Back to Home">
        <mat-icon>arrow_back</mat-icon>
      </button>
      </div>
    <button mat-raised-button color="primary" (click)="addTemplate()">
      <mat-icon>add</mat-icon>
      Create Template
    </button>
  </div>

  <div *ngIf="showForm" class="form-card mat-elevation-z4" [@slideInOut]>
    <form [formGroup]="form" (ngSubmit)="saveTemplate()">
      <h2>{{ isEdit ? 'Edit Template' : 'Create New Template' }}</h2>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Template Name</mat-label>
        <input matInput formControlName="name" placeholder="Enter template name">
        <mat-icon matSuffix>label</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Subject</mat-label>
        <input matInput formControlName="subject" placeholder="Enter email subject">
        <mat-icon matSuffix>subject</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email Body</mat-label>
        <textarea matInput formControlName="body" rows="6" placeholder="Enter email content"></textarea>
        <mat-icon matSuffix>email</mat-icon>
      </mat-form-field>

      <div class="form-actions">
        <button mat-raised-button color="warn" type="button" (click)="cancel()">
          <mat-icon>close</mat-icon>
          Cancel
        </button>
        <button mat-raised-button color="primary" type="submit">
          <mat-icon>save</mat-icon>
          {{ isEdit ? 'Update' : 'Save' }}
        </button>
      </div>
    </form>
  </div>

  <div class="templates-grid">
    <mat-card class="template-card mat-elevation-z2" *ngFor="let template of templates">
      <mat-card-header>
        <mat-card-title>{{ template.name }}</mat-card-title>
        <mat-card-subtitle>{{ template.subject }}</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <p class="template-body">{{ template.body }}</p>
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-icon-button color="primary" (click)="editTemplate(template)" matTooltip="Edit Template">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="deleteTemplate(template.id)" matTooltip="Delete Template">
          <mat-icon>delete</mat-icon>
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>